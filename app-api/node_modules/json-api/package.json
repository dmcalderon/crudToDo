{
  "_args": [
    [
      {
        "raw": "json-api@next",
        "scope": null,
        "escapedName": "json-api",
        "name": "json-api",
        "rawSpec": "next",
        "spec": "next",
        "type": "tag"
      },
      "/Users/tim/Downloads/01-Activities 2/10-Sequelize-Update-Delete/Solved"
    ]
  ],
  "_from": "json-api@next",
  "_id": "json-api@3.0.0-beta.24",
  "_inCache": true,
  "_location": "/json-api",
  "_nodeVersion": "8.11.0",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/json-api_3.0.0-beta.24_1522970658151_0.24592426130053435"
  },
  "_npmUser": {
    "name": "ethanresnick",
    "email": "ethan.resnick@gmail.com"
  },
  "_npmVersion": "5.6.0",
  "_phantomChildren": {
    "ms": "2.0.0"
  },
  "_requested": {
    "raw": "json-api@next",
    "scope": null,
    "escapedName": "json-api",
    "name": "json-api",
    "rawSpec": "next",
    "spec": "next",
    "type": "tag"
  },
  "_requiredBy": [
    "#USER"
  ],
  "_resolved": "https://registry.npmjs.org/json-api/-/json-api-3.0.0-beta.24.tgz",
  "_shasum": "6ed5e709eecb48dc04d541db0f0f194da0351e97",
  "_shrinkwrap": null,
  "_spec": "json-api@next",
  "_where": "/Users/tim/Downloads/01-Activities 2/10-Sequelize-Update-Delete/Solved",
  "author": {
    "name": "Ethan Resnick",
    "email": "ethan.resnick@gmail.com"
  },
  "bugs": {
    "url": "https://github.com/ethanresnick/json-api/issues"
  },
  "dependencies": {
    "@types/debug": "0.0.29",
    "@types/depd": "^1.1.32",
    "@types/express": "^4.11.0",
    "@types/lodash": "^4.14.93",
    "@types/node": "^8.5.9",
    "@types/pluralize": "0.0.27",
    "@types/pug": "^2.0.4",
    "@types/qs": "^6.5.1",
    "@types/ramda": "^0.25.20",
    "@types/url-template": "^2.0.28",
    "content-type": "^1.0.4",
    "dasherize": "2.0.x",
    "debug": "^3.1.0",
    "depd": "^1.1.2",
    "flat": "^1.2.1",
    "immutable": "^3.8.2",
    "lodash": "^4.17.4",
    "negotiator": "github:ethanresnick/negotiator#full-parse-access",
    "pluralize": "0.0.11",
    "pug": "^2.0.0-rc.4",
    "qs": "^6.5.1",
    "ramda": "^0.25.0",
    "raw-body": "2.x.x",
    "supports-color": "^4.5.0",
    "url-template": "^2.0.4",
    "vary": "^1.1.2"
  },
  "description": "A library for constructing JSON-API compliant responses",
  "devDependencies": {
    "@ethanresnick/tslint-config": "^5.5.1",
    "@types/chai-subset": "^1.3.1",
    "@types/mocha": "^2.2.46",
    "@types/mongodb": "^2.2.20",
    "@types/mongoose": "^4.7.36",
    "@types/sinon": "^4.3.0",
    "@types/superagent": "^3.5.6",
    "body-parser": "^1.18.2",
    "chai": "^4.1.2",
    "chai-subset": "^1.6.0",
    "coveralls": "^2.13.3",
    "cpr": "^2.2.0",
    "eslint": "0.x.x",
    "express": "^4.16.2",
    "gulp": "^3.8.6",
    "istanbul": "0.3.x",
    "mocha": "^2.5.3",
    "mongoose": "^4.13.9",
    "node-mongoose-fixtures": "^0.2.4",
    "nyc": "^11.4.1",
    "rimraf": "^2.6.2",
    "sinon": "^4.4.5",
    "source-map-support": "^0.5.3",
    "superagent": "^3.8.2",
    "ts-node": "^3.3.0",
    "tslint": "^5.9.1",
    "typescript": "^2.7.0"
  },
  "directories": {},
  "dist": {
    "integrity": "sha512-fUWRlsLON/OR7CwoAC/ywH/vryas9UKgvO9vgtZsN2xT7cOY4chjSFLTbZKuFqqNnpV4H43lJjQBfcyaeAY/JA==",
    "shasum": "6ed5e709eecb48dc04d541db0f0f194da0351e97",
    "tarball": "https://registry.npmjs.org/json-api/-/json-api-3.0.0-beta.24.tgz",
    "fileCount": 342,
    "unpackedSize": 930771
  },
  "engines": {
    "node": ">=6.x.x"
  },
  "gitHead": "572945dc1b811db61e2e8b30d82cfbcd25479c86",
  "homepage": "https://github.com/ethanresnick/json-api",
  "keywords": [
    "express",
    "mongoose",
    "json-api",
    "jsonapi",
    "api",
    "hypermedia",
    "rest",
    "restful"
  ],
  "license": "LGPL-3.0",
  "main": "build/src/index.js",
  "maintainers": [
    {
      "name": "ethanresnick",
      "email": "studip101@gmail.com"
    }
  ],
  "name": "json-api",
  "nyc": {
    "extension": [
      ".ts"
    ],
    "exclude": [
      "typings",
      "node_modules",
      "test",
      "templates",
      "build",
      "lib/index.d.ts"
    ],
    "require": [
      "ts-node/register"
    ],
    "reporter": [
      "json",
      "html"
    ],
    "sourceMap": true,
    "instrument": true
  },
  "optionalDependencies": {},
  "peerDependencies": {
    "mongoose": "^4.7.0",
    "express": "^4.0.0"
  },
  "readme": "json-api [![CircleCI Badge](https://circleci.com/gh/ethanresnick/json-api.png?0d6d9ba9db7f15eb6363c6fd93408526bef06035&style=shield)](https://circleci.com/gh/ethanresnick/json-api) [![Coverage Status](https://coveralls.io/repos/ethanresnick/json-api/badge.svg?branch=master&service=github)](https://coveralls.io/github/ethanresnick/json-api?branch=master)\n========\n\nThis library creates a [JSON API](http://jsonapi.org/)-compliant REST API from your Node app and automatically generates API documentation.\n\nIt currently integrates with [Express](http://expressjs.com/) or Koa apps that use [Mongoose](http://mongoosejs.com/) models, but it can easily be integrated with other frameworks and databases. If you want to see an integration with another stack, just open an issue!\n\nThis library implements all the required portions of the 1.0 spec, which is more than enough for basic CRUD. It does not yet implement some of the smaller, optional pieces, like related resource URIs.\n\n# V3 Beta Installation\n```$ npm install json-api@next```\n\n# Example API\nCheck out the [full, working v3 example repo](https://github.com/ethanresnick/json-api-example/tree/v3-wip) for all the details on building an API with this library. Or, take a look at the basic example below:\n\n```javascript\n  var app = require('express')()\n    , API = require('json-api');\n\n  var models = {\n    \"Person\": require('./models/person'),\n    \"Place\": require('./models/place')\n  };\n\n  var adapter = new API.dbAdapters.Mongoose(models);\n  var registry = new API.ResourceTypeRegistry({\n    \"people\": {\n      beforeRender: function(resource, req, res) {\n        if(!userIsAdmin(req)) resource.removeAttr(\"password\");\n        return resource;\n      }\n    },\n    \"places\": {}\n  }, {\n    \"dbAdapter\": adapter,\n    \"urlTemplates\": { \n      \"self\": \"/{type}/{id}\"\n    }\n  });\n\n  // Tell the lib the host name our API is served from; needed for security.\n  const opts = { host: 'example.com' };\n\n  // Set up a front controller, passing it controllers that'll be used\n  // to handle requests for API resources and for the auto-generated docs.\n  var Front = new API.httpStrategies.Express(\n    new API.controllers.API(registry), \n    new API.controllers.Documentation(registry, {name: 'Example API'})\n  );\n\n  // Render the docs at /\n  app.get(\"/\", Front.docsRequest);\n\n  // Add routes for basic list, read, create, update, delete operations\n  app.get(\"/:type(people|places)\", Front.apiRequest);\n  app.get(\"/:type(people|places)/:id\", Front.apiRequest);\n  app.post(\"/:type(people|places)\", Front.apiRequest);\n  app.patch(\"/:type(people|places)/:id\", Front.apiRequest);\n  app.delete(\"/:type(people|places)/:id\", Front.apiRequest);\n\n  // Add routes for adding to, removing from, or updating resource relationships\n  app.post(\"/:type(people|places)/:id/relationships/:relationship\", Front.apiRequest);\n  app.patch(\"/:type(people|places)/:id/relationships/:relationship\", Front.apiRequest);\n  app.delete(\"/:type(people|places)/:id/relationships/:relationship\", Front.apiRequest);\n\n\n  app.listen(3000);\n  ```\n\n# Core Concepts\n## Resource Type Descriptions <a name=\"resource-type-descriptions\"></a>\nThe JSON-API spec is built around the idea of typed resource collections. For example, you can have a `\"people\"` collection and a `\"companies\"` collection. (By convention, type names are plural, lowercase, and dasherized.)\n\nTo use this library, you describe the special behavior (if any) that resources of each type should have, and then register those descriptions with a central `ResourceTypeRegistry`. Then the library takes care of the rest. Each resource type description is simply an object with the following properties:\n\n- `urlTemplates`: an object containing url templates used to output the json for resources of the type being described. Currently, the supported keys are: `\"self\"`, which defines the template used for building [resource urls](http://jsonapi.org/format/#document-structure-resource-urls) of that type, and `\"relationship\"`, which defines the template that will be used for [relationship urls](http://jsonapi.org/format/#fetching-relationships).\n- `dbAdapter`: the [database adapter](#database-adapters) to use to find and update these resources. By specifying this for each resource type, different resource types can live in different kinds of databases.\n\n- <a name=\"before-render\"></a>`beforeRender` (optional): a function called on each resource after it's found by the adapter but before it's sent to the client. This lets you do things like hide fields that some users aren't authorized to see. [Usage details](https://github.com/ethanresnick/json-api-example/blob/master/src/resource-descriptions/people.js#L7).\n\n- <a name=\"before-save\"></a>`beforeSave` (optional): a function called on each resource provided by the client (i.e. in a `POST` or `PATCH` request) before it's sent to the adapter for saving. You can transform the data here as necessary or pre-emptively reject the request. [Usage details](https://github.com/ethanresnick/json-api-example/blob/master/src/resource-descriptions/people.js#L25).\n\n- <a name=\"parentType\"></a>`parentType` (optional): this allows you to designate one resource type being a sub-type of another (its `parentType`). This is often used when you have two resource types that live in the same database table/collection, and their type is determined with a discriminator key. See the [`schools` type](https://github.com/ethanresnick/json-api-example/blob/master/src/resource-descriptions/schools.js#L2) in the example repository. If a resource has a `parentType`, it inherits that type's configuration (i.e. its `urlTemplates`, `beforeSave`/`beforeRender` functions, `info`, etc), but can override those configuration settings too.\n\n-  <a name=\"info\"></a>`info` (optional): this allows you to provide extra information about the resource that will be included in the documentation. Available properties are `\"description\"` (a string describing what resources of this type are) and `\"fields\"`. `\"fields\"` holds an object in which you can describe each field in the resource (e.g. listing validation rules). See the [example implemenation](https://github.com/ethanresnick/json-api-example/blob/master/src/resource-descriptions/schools.js) for more details.\n\n- <a name=\"transformLinkage\">`transformLinkage` (optional): a boolean that, if true, will cause any resource identifier objects (i.e., the `{type, id}` pointer objects in each relationship) that have this type as their `type` to be passed to this type's `beforeRender`/`beforeSave` functions for transformation. Note that turning on `transformLinkage`, even for only one resource type, incurs a big performance cost. This may be optimized a bit in the future, but, fundamentally, transforming linkage is expensive because there can be many linkage items per relationship and each transform involves allocating a promise (as beforeRender and beforeSave can be async).\n\n## Query Factories\nWhen a request comes in, the json-api library extracts various parameters from it to build a query that will be used to fulfill the user's request.\n\nHowever, to support advanced use cases, you might want to override how the library generates this query in order to select/update different data, or to modify how the query's result (data or error) is placed into the JSON:API response. To do this, you can just pass in your own function (a \"query factory\") for constructing this query. See an example [here](https://github.com/ethanresnick/json-api-example/blob/0d8d50c7e651dc099b4f5a89b7a9c47b8f7a4f32/src/index.js#L56).\n\nOne simple thing you can do with query factories is to create urls (or, in REST terminology, resources) that map to different database items over time. For example, you could have an `/events/upcoming` resource or a `/users/me` resource. To do that, your query factory function would call the library's built-in function to get its auto-generated query, and then modifiy that query (which would likely be for all the events and users respectively) to add a filter constraint that only returns the appropriate resources.\n\nQuery factory functions are also a good place to do permissions checks that rely on access to the parsed request body. If the user doesn't have permission, you can throw an error, and the library will pass it along gracefully in the response. See [error handling](#error-handling).\n\n## Filtering\nThis library supports filtering out of the box, using a syntax that's designed to be easier to read, and much easier to write, than the  square brackets syntax used by libraries like [qs](https://github.com/ljharb/qs).\n\nFor example, to include only items where the zip code is either 90210 or 10012, you'd write: \n\n`?filter=(zip,in,(90210,10012))`. \n\nBy contrast, with the square-bracket syntax you'd have to write something like: \n\n`?filter[zip][in][]=90210&filter[zip][in][]=10012`.\n\n### Formatting filtering constraints\nIn this library's default format, the value of the `filter` parameter is one or more \"filter constraints\" listed next to each other. These constraints narrow the results to only include those that match. The format of a filter constraint is: `(fieldName,operator,value)`. For example:\n\n- `(name,eq,Bob)`: only include items where the name equals Bob\n- `(salary,gte,150000)`: only include items where the salary is greater than or equal to 150,000.\n\nIf the value given is an integer, a float, `null`, `true`, or `false`, it is treated as a literal; every other value is treated as a string. If you want to express a string like \"true\", you can explicitly put it in single quotes, e.g.: `(street,eq,'true')`. To define a list of values, surround the values in parentheses and separate them with commas (e.g. `(90210,10012)` is a list of values used with the `in` operator above).\n\nThe valid operators (for the buit-in Mongoose adapter) are: `eq`, `neq`, `in`, `nin`, `lt`, `gt`, `lte`, and `gte`.\n\nIf you have multiple constraints, you can choose whether to combine them with an `AND` or an `OR`. To do that, instead of providing three items in your field constraint (i.e., the field name, operator, and value), provide only two: 1) `and` or `or`, and 2) a list of constraints. E.g.:\n\n`GET /people?filter=(or,((name,eq,Bob),(zip,eq,90210)))`\n\nWill find all the people who are named Bob or who live in the 90210 zip code.\n\nFilter constraints listed next to each other at the top-level are combined with an \"AND\". E.g., `GET /people?filter=(name,Bob)(zip,90210)` will give only the people named Bob who live in the 90210 zip code.\n\nFinally, as a shorthand, when the field name is not `and` or `or`, and the operator you want is `eq` (for equals), you can omit the operator entirely. E.g. `(name,Bob)` expresses the same constraint as `(name,eq,Bob)`. \n\nPutting it all together, you could do:\n\n`GET /people?filter=(or,((email,test@example.com)(name,Test)))(dob,gte,1963)`\n\nThis will find everyone born after 1963 who also has either the name \"Test\" or the email \"test@example.com\".\n\nNote: this filter query paramer format is entirely cusomizable, and other operators can be used if your adapter supports them. See MongooseAdapter's static properties and the ResourceTypeRegistry's constructor for details.\n\n### On URL Encoding\nWhen the value that you want to use in a filter constraint contains parentheses, commas, or single quotation marks, you must URL encode those characters so that the server doesn't interpret them as delimiters. Conversely, when those characters do appear as delimiters (e.g., the parentheses that surround each filter constraint, or the comma that separates the field name from the operator), they must NOT be url encoded.\n\nSome clients automatically encode parentheses, commas, and single quotation marks in url query strings by default. This is incorrect behavior [per RFC 3986](https://tools.ietf.org/html/rfc3986#section-2.2), and it will cause the server to error, because it won't see the appropriate (unescaped) delimiter characters. Check your client for a setting to turn this behavior off.\n\n## Pagination\nPagination limit and offset parameters are accepted in the following form:\n```\n?page[offset]=<value>&page[limit]=<value>\n```\nFor example, to get 25 people starting at the 51st person:\n```\nGET /people?page[offset]=50&page[limit]=25\n```\n\n## Error Handling\nCode that you provide the library (e.g., a query factory function) can throw an error or, in some cases, return a promise that rejects with an error. \n\nAny time an `Error` is encountered, the library responds with a generic \"An error has ocurred\" response. The library doesn't pass any information from the error object (e.g., its message or stack trace) back to the client by default, as that could leak details about the server's implementation, which is not great for security.\n\nIf you want to pass information about the error back to the user, you need to explicitly mark it as safe to expose to the user, which you can do in two ways. First, you can throw an instance of the library's [`APIError` class](https://github.com/ethanresnick/json-api/blob/master/src/types/APIError.ts) directly, instead of a more general `Error`. (See the APIError constructor and the [json:api spec on errors](http://jsonapi.org/format/#errors) for details about what properties you can expose.) Second, if your error is coming from some existing code, you can attach a [special, Symbol-named property](https://github.com/ethanresnick/json-api/blob/d8bfaf0710e902d1e3ee7efba7e73aa2446788b5/src/types/APIError.ts#L22) to it with a truthy value, and that'll trigger the framework to know that it's safe to display.\n\nMany errors are also serialized by the library with standard URIs in their `code` field, which serves as a reliable way to identify each type of error. The library exports an [Errors object](src/util/errors.ts), which contains a collection of functions for making errors of known types with these codes already set in them. If you throw errors, you should reuse these functions/codes where possible. To detect an APIError's type in your code, call `.toJSON()` and read the resulting `.code` property.\n\n## Routing, Authentication & Controllers\nThis library gives you a Front controller (shown in the example) that can handle requests for API results or for the documentation. But the library doesn't prescribe how requests get to this controller. This allows you to use any url scheme, routing layer, or authentication system you already have in place. \n\nYou just need to make sure that: `req.params.type` reflects the requested resource type; `req.params.id` reflects the requested id, if any; and `req.params.relationship` reflects the relationship name, in the event that the user is requesting a relationship url. The library will read these values to help it construct the query needed to fulfill the user's request.\n\nThe library may, in the future, also read `req.params.related` for related resource urls, so make sure you're not using that if you don't want the library to pick up it's value and use it in the query.\n\nIn the example above, routing is handled with Express's built-in `app[VERB]` methods, and the three parameters are set properly using express's built-in `:param` syntax. If you're looking for something more robust, you might be interested in [Express Simple Router](https://github.com/ethanresnick/express-simple-router). For authentication, check out [Express Simple Firewall](https://github.com/ethanresnick/express-simple-firewall).\n\n## Database Adapters\nAn adapter handles all the interaction with the database. It is responsible for turning requests into standard [`Resource`](https://github.com/ethanresnick/json-api/blob/master/src/types/Resource.ts) or [`Collection`](https://github.com/ethanresnick/json-api/blob/master/src/types/Collection.ts) objects that the rest of the library will use. See the built-in [MongooseAdapter](https://github.com/ethanresnick/json-api/blob/master/src/db-adapters/Mongoose/MongooseAdapter.ts) for an example.\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/ethanresnick/json-api.git"
  },
  "scripts": {
    "build": "npm run lint && npm run build:lintfree",
    "build:lintfree": "npm run clean && cpr templates build/templates && echo Using TypeScript && tsc --version && tsc --pretty",
    "clean": "rimraf build",
    "cover": "NODE_ENV=test npm run test:install-fixtures && nyc npm run test:fixtures-installed",
    "cover:view": "npm run cover && open coverage/index.html",
    "lint": "npm run lint:src & npm run lint:test",
    "lint:src": "tslint --project tsconfig.json --format verbose --exclude 'test/**/*' --config ./src/tslint.json",
    "lint:test": "tslint --project tsconfig.json --format verbose --exclude 'src/**/*' --config ./test/tslint.json",
    "prepare": "npm run build",
    "prepublishOnly": "npm run test",
    "test": "npm run test:install-fixtures && npm run test:fixtures-installed",
    "test:debug": "npm run test -- --inspect-brk",
    "test:fixtures-installed": "NODE_ENV=testing mocha --compilers ts:ts-node/register --recursive test/unit/ test/integration/ --full-trace --check-leaks",
    "test:install-fixtures": "NODE_ENV=testing ts-node test/app/database/install-fixtures.ts",
    "watch": "npm run build -- --watch",
    "watch:lintfree": "npm run build:lintfree -- --watch",
    "watch:test": "npm run test -- --watch"
  },
  "typings": "build/src/index.d.ts",
  "version": "3.0.0-beta.24"
}
